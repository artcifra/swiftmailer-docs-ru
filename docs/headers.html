<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
    <head>
        <meta name="keywords" content="swift mailer, swiftmailer, swiftmail, php mailer, phpmailer, oop mailer, bulk emailing" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <link href="../css/global.css" media="screen" rel="stylesheet" type="text/css" />
        <link href="../css/homepage.css" media="screen" rel="stylesheet" type="text/css" />
        <link href="../css/download.css" media="screen" rel="stylesheet" type="text/css" />
        <link href="../css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
        <link href="../css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
        <link href="../css/code.css" media="screen" rel="stylesheet" type="text/css" />

        <title>Message Headers &#8211; Documentation &#8211; Swift Mailer</title>

        <script type="text/javascript">
            var _gaq = _gaq || [];
        </script>
  </head>
  <body>
  <a href="https://github.com/ruden/swiftmailer-docs-ru"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"></a>
    <div id="layoutcontainer">
      
    <div id="layout">
      
      <div id="header" class="corners top right left">
        <div id="headercontent">
          <img id="logo" src="../images/logo.png" alt="Swift Mailer" />
          
          <div id="navigation">
            <ul>
              <li><a href="/swiftmailer-docs-ru/">Главная</a></li>
              <li><a href="/swiftmailer-docs-ru/download.html">Установка</a></li>
              <li><a href="/swiftmailer-docs-ru/docs/introduction.html">Документация</a></li>
              <li><a href="/swiftmailer-docs-ru/bugs.html">Ошибки</a></li>
              <li class="tab corners top right left"><a class="download-file" href="/swiftmailer-docs-ru/download.html">текущий 6.0.2</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div id="wrapper" class="corners bottom right left">

          <div>
              <div id="container">
                  <div id="content">
                          <div id="doc" class="body-web">
        <div class="section" id="message-headers">
<h1>Message Headers<a class="headerlink" href="#message-headers" title="Permalink to this headline">¶</a></h1>
<p>Sometimes you'll want to add your own headers to a message or modify/remove
headers that are already present. You work with the message's HeaderSet to do
this.</p>
<div class="section" id="header-basics">
<h2>Header Basics<a class="headerlink" href="#header-basics" title="Permalink to this headline">¶</a></h2>
<p>All MIME entities in Swift Mailer -- including the message itself -- store
their headers in a single object called a HeaderSet. This HeaderSet is
retrieved with the <code class="notranslate">getHeaders()</code> method.</p>
<p>As mentioned in the previous chapter, everything that forms a part of a message
in Swift Mailer is a MIME entity that is represented by an instance of
<code class="notranslate">Swift_Mime_SimpleMimeEntity</code>. This includes -- most notably -- the message
object itself, attachments, MIME parts and embedded images. Each of these MIME
entities consists of a body and a set of headers that describe the body.</p>
<p>For all of the &quot;standard&quot; headers in these MIME entities, such as the
<code class="notranslate">Content-Type</code>, there are named methods for working with them, such as
<code class="notranslate">setContentType()</code> and <code class="notranslate">getContentType()</code>. This is because headers are a
moderately complex area of the library. Each header has a slightly different
required structure that it must meet in order to comply with the standards that
govern email (and that are checked by spam blockers etc).</p>
<p>You fetch the HeaderSet from a MIME entity like so:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>

<span class="c1">// Fetch the HeaderSet from a Message object</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>

<span class="nv">$attachment</span> <span class="o">=</span> <span class="nx">Swift_Attachment</span><span class="o">::</span><span class="na">fromPath</span><span class="p">(</span><span class="s1">&#39;document.pdf&#39;</span><span class="p">);</span>

<span class="c1">// Fetch the HeaderSet from an attachment object</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$attachment</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
<p>The job of the HeaderSet is to contain and manage instances of Header objects.
Depending upon the MIME entity the HeaderSet came from, the contents of the
HeaderSet will be different, since an attachment for example has a different
set of headers to those in a message.</p>
<p>You can find out what the HeaderSet contains with a quick loop, dumping out the
names of the headers:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">getAll</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$header</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$header</span><span class="o">-&gt;</span><span class="na">getFieldName</span><span class="p">());</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">Content-Transfer-Encoding</span>
<span class="cm">Content-Type</span>
<span class="cm">MIME-Version</span>
<span class="cm">Date</span>
<span class="cm">Message-ID</span>
<span class="cm">From</span>
<span class="cm">Subject</span>
<span class="cm">To</span>
<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>You can also dump out the rendered HeaderSet by calling its <code class="notranslate">toString()</code>
method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">Message-ID: &lt;1234869991.499a9ee7f1d5e@swift.generated&gt;</span>
<span class="cm">Date: Tue, 17 Feb 2009 22:26:31 +1100</span>
<span class="cm">Subject: Awesome subject!</span>
<span class="cm">From: sender@example.org</span>
<span class="cm">To: recipient@example.org</span>
<span class="cm">MIME-Version: 1.0</span>
<span class="cm">Content-Type: text/plain; charset=utf-8</span>
<span class="cm">Content-Transfer-Encoding: quoted-printable</span>
<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>Where the complexity comes in is when you want to modify an existing header.
This complexity comes from the fact that each header can be of a slightly
different type (such as a Date header, or a header that contains email
addresses, or a header that has key-value parameters on it!). Each header in
the HeaderSet is an instance of <code class="notranslate">Swift_Mime_Header</code>. They all have common
functionality, but knowing exactly what type of header you're working with will
allow you a little more control.</p>
<p>You can determine the type of header by comparing the return value of its
<code class="notranslate">getFieldType()</code> method with the constants <code class="notranslate">TYPE_TEXT</code>,
<code class="notranslate">TYPE_PARAMETERIZED</code>, <code class="notranslate">TYPE_DATE</code>, <code class="notranslate">TYPE_MAILBOX</code>, <code class="notranslate">TYPE_ID</code> and
<code class="notranslate">TYPE_PATH</code> which are defined in <code class="notranslate">Swift_Mime_Header</code>:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">getAll</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$header</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nv">$header</span><span class="o">-&gt;</span><span class="na">getFieldType</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_TEXT</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_PARAMETERIZED</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;parameterized&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_MAILBOX</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;mailbox&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_DATE</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_ID</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;ID&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nx">Swift_Mime_Header</span><span class="o">::</span><span class="na">TYPE_PATH</span><span class="o">:</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;%s: is a %s header&lt;br /&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$header</span><span class="o">-&gt;</span><span class="na">getFieldName</span><span class="p">(),</span> <span class="nv">$type</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">Content-Transfer-Encoding: is a text header</span>
<span class="cm">Content-Type: is a parameterized header</span>
<span class="cm">MIME-Version: is a text header</span>
<span class="cm">Date: is a date header</span>
<span class="cm">Message-ID: is a ID header</span>
<span class="cm">From: is a mailbox header</span>
<span class="cm">Subject: is a text header</span>
<span class="cm">To: is a mailbox header</span>
<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>Headers can be removed from the set, modified within the set, or added to the
set.</p>
<p>The following sections show you how to work with the HeaderSet and explain the
details of each implementation of <code class="notranslate">Swift_Mime_Header</code> that may exist within
the HeaderSet.</p>
</div>
<div class="section" id="header-types">
<h2>Header Types<a class="headerlink" href="#header-types" title="Permalink to this headline">¶</a></h2>
<p>Because all headers are modeled on different data (dates, addresses, text!)
there are different types of Header in Swift Mailer. Swift Mailer attempts to
categorize all possible MIME headers into more general groups, defined by a
small number of classes.</p>
<div class="section" id="text-headers">
<h3>Text Headers<a class="headerlink" href="#text-headers" title="Permalink to this headline">¶</a></h3>
<p>Text headers are the simplest type of Header. They contain textual information
with no special information included within it -- for example the Subject
header in a message.</p>
<p>There's nothing particularly interesting about a text header, though it is
probably the one you'd opt to use if you need to add a custom header to a
message. It represents text just like you'd think it does. If the text contains
characters that are not permitted in a message header (such as new lines, or
non-ascii characters) then the header takes care of encoding the text so that
it can be used.</p>
<p>No header -- including text headers -- in Swift Mailer is vulnerable to
header-injection attacks. Swift Mailer breaks any attempt at header injection
by encoding the dangerous data into a non-dangerous form.</p>
<p>It's easy to add a new text header to a HeaderSet. You do this by calling the
HeaderSet's <code class="notranslate">addTextHeader()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addTextHeader</span><span class="p">(</span><span class="s1">&#39;Your-Header-Name&#39;</span><span class="p">,</span> <span class="s1">&#39;the header value&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>Changing the value of an existing text header is done by calling it's
<code class="notranslate">setValue()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$subject</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Subject&#39;</span><span class="p">);</span>
<span class="nv">$subject</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;new subject&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>When output via <code class="notranslate">toString()</code>, a text header produces something like the
following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$subject</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Subject&#39;</span><span class="p">);</span>
<span class="nv">$subject</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;amazing subject line&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$subject</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Subject: amazing subject line</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>If the header contains any characters that are outside of the US-ASCII range
however, they will be encoded. This is nothing to be concerned about since mail
clients will decode them back:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$subject</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Subject&#39;</span><span class="p">);</span>
<span class="nv">$subject</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;contains – dash&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$subject</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Subject: contains =?utf-8?Q?=E2=80=93?= dash</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="parameterized-headers">
<h3>Parameterized Headers<a class="headerlink" href="#parameterized-headers" title="Permalink to this headline">¶</a></h3>
<p>Parameterized headers are text headers that contain key-value parameters
following the textual content. The Content-Type header of a message is a
parameterized header since it contains charset information after the content
type.</p>
<p>The parameterized header type is a special type of text header. It extends the
text header by allowing additional information to follow it. All of the methods
from text headers are available in addition to the methods described here.</p>
<p>Adding a parameterized header to a HeaderSet is done by using the
<code class="notranslate">addParameterizedHeader()</code> method which takes a text value like
<code class="notranslate">addTextHeader()</code> but it also accepts an associative array of key-value
parameters:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addParameterizedHeader</span><span class="p">(</span>
  <span class="s1">&#39;Header-Name&#39;</span><span class="p">,</span> <span class="s1">&#39;header value&#39;</span><span class="p">,</span>
  <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">]</span>
  <span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>To change the text value of the header, call it's <code class="notranslate">setValue()</code> method just as
you do with text headers.</p>
<p>To change the parameters in the header, call the header's <code class="notranslate">setParameters()</code>
method or the <code class="notranslate">setParameter()</code> method (note the pluralization):</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$type</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">);</span>

<span class="c1">// setParameters() takes an associative array</span>
<span class="nv">$type</span><span class="o">-&gt;</span><span class="na">setParameters</span><span class="p">([</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;file.txt&#39;</span><span class="p">,</span>
  <span class="s1">&#39;charset&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iso-8859-1&#39;</span>
<span class="p">]);</span>

<span class="c1">// setParameter() takes two args for $key and $value</span>
<span class="nv">$type</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="s1">&#39;iso-8859-1&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>When output via <code class="notranslate">toString()</code>, a parameterized header produces something like
the following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$type</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">);</span>
<span class="nv">$type</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;text/html&#39;</span><span class="p">);</span>
<span class="nv">$type</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$type</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Content-Type: text/html; charset=utf-8</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>If the header contains any characters that are outside of the US-ASCII range
however, they will be encoded, just like they are for text headers. This is
nothing to be concerned about since mail clients will decode them back.
Likewise, if the parameters contain any non-ascii characters they will be
encoded so that they can be transmitted safely:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$attachment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Attachment</span><span class="p">();</span>
<span class="nv">$disp</span> <span class="o">=</span> <span class="nv">$attachment</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">);</span>
<span class="nv">$disp</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;attachment&#39;</span><span class="p">);</span>
<span class="nv">$disp</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="s1">&#39;report–may.pdf&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$disp</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Content-Disposition: attachment; filename*=utf-8&#39;&#39;report%E2%80%93may.pdf</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="date-headers">
<h3>Date Headers<a class="headerlink" href="#date-headers" title="Permalink to this headline">¶</a></h3>
<p>Date headers contains an RFC 2822 formatted date (i.e. what PHP's <code class="notranslate">date('r')</code>
returns). They are used anywhere a date or time is needed to be presented as a
message header.</p>
<p>The data on which a date header is modeled as a DateTimeImmutable object. The
object is used to create a correctly structured RFC 2822 formatted date with
timezone such as <code class="notranslate">Tue, 17 Feb 2009 22:26:31 +1100</code>.</p>
<p>The obvious place this header type is used is in the <code class="notranslate">Date:</code> header of the
message itself.</p>
<p>It's easy to add a new date header to a HeaderSet. You do this by calling the
HeaderSet's <code class="notranslate">addDateHeader()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addDateHeader</span><span class="p">(</span><span class="s1">&#39;Your-Header&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">DateTimeImmutable</span><span class="p">(</span><span class="s1">&#39;3 days ago&#39;</span><span class="p">));</span>
</pre></div>
</div></div>
<p>Changing the value of an existing date header is done by calling it's
<code class="notranslate">setDateTime()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$date</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">);</span>
<span class="nv">$date</span><span class="o">-&gt;</span><span class="na">setDateTime</span><span class="p">(</span><span class="k">new</span> <span class="nx">DateTimeImmutable</span><span class="p">());</span>
</pre></div>
</div></div>
<p>When output via <code class="notranslate">toString()</code>, a date header produces something like the
following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$date</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Date: Wed, 18 Feb 2009 13:35:02 +1100</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="mailbox-e-mail-address-headers">
<h3>Mailbox (e-mail address) Headers<a class="headerlink" href="#mailbox-e-mail-address-headers" title="Permalink to this headline">¶</a></h3>
<p>Mailbox headers contain one or more email addresses, possibly with personalized
names attached to them. The data on which they are modeled is represented by an
associative array of email addresses and names.</p>
<p>Mailbox headers are probably the most complex header type to understand in
Swift Mailer because they accept their input as an array which can take various
forms, as described in the previous chapter.</p>
<p>All of the headers that contain e-mail addresses in a message -- with the
exception of <code class="notranslate">Return-Path:</code> which has a stricter syntax -- use this header
type. That is, <code class="notranslate">To:</code>, <code class="notranslate">From:</code> etc.</p>
<p>You add a new mailbox header to a HeaderSet by calling the HeaderSet's
<code class="notranslate">addMailboxHeader()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addMailboxHeader</span><span class="p">(</span><span class="s1">&#39;Your-Header-Name&#39;</span><span class="p">,</span> <span class="p">[</span>
      <span class="s1">&#39;person1@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Person Name One&#39;</span><span class="p">,</span>
      <span class="s1">&#39;person2@example.org&#39;</span><span class="p">,</span>
      <span class="s1">&#39;person3@example.org&#39;</span><span class="p">,</span>
      <span class="s1">&#39;person4@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another named person&#39;</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div></div>
<p>Changing the value of an existing mailbox header is done by calling it's
<code class="notranslate">setNameAddresses()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$to</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setNameAddresses</span><span class="p">([</span>
  <span class="s1">&#39;joe@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Joe Bloggs&#39;</span><span class="p">,</span>
  <span class="s1">&#39;john@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span>
  <span class="s1">&#39;no-name@example.org&#39;</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div></div>
<p>If you don't wish to concern yourself with the complicated accepted input
formats accepted by <code class="notranslate">setNameAddresses()</code> as described in the previous chapter
and you only want to set one or more addresses (not names) then you can just
use the <code class="notranslate">setAddresses()</code> method instead:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$to</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setAddresses</span><span class="p">([</span>
  <span class="s1">&#39;joe@example.org&#39;</span><span class="p">,</span>
  <span class="s1">&#39;john@example.org&#39;</span><span class="p">,</span>
  <span class="s1">&#39;no-name@example.org&#39;</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Both methods will accept the above input format in practice.</p>
</div></div>
<p>If all you want to do is set a single address in the header, you can use a
string as the input parameter to <code class="notranslate">setAddresses()</code> and/or
<code class="notranslate">setNameAddresses()</code>:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$to</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setAddresses</span><span class="p">(</span><span class="s1">&#39;joe-bloggs@example.org&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>When output via <code class="notranslate">toString()</code>, a mailbox header produces something like the
following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$to</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setNameAddresses</span><span class="p">([</span>
  <span class="s1">&#39;person1@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Name of Person&#39;</span><span class="p">,</span>
  <span class="s1">&#39;person2@example.org&#39;</span><span class="p">,</span>
  <span class="s1">&#39;person3@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another Person&#39;</span>
<span class="p">]);</span>

<span class="k">echo</span> <span class="nv">$to</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">To: Name of Person &lt;person1@example.org&gt;, person2@example.org, Another Person</span>
<span class="cm"> &lt;person3@example.org&gt;</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
<p>Internationalized domains are automatically converted to IDN encoding:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$to</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setAddresses</span><span class="p">(</span><span class="s1">&#39;joe@ëxämple.org&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$to</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">To: joe@xn--xmple-gra1c.org</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id-headers">
<h3>ID Headers<a class="headerlink" href="#id-headers" title="Permalink to this headline">¶</a></h3>
<p>ID headers contain identifiers for the entity (or the message). The most
notable ID header is the Message-ID header on the message itself.</p>
<p>An ID that exists inside an ID header looks more-or-less less like an email
address. For example, <code class="notranslate">&lt;1234955437.499becad62ec2&#64;example.org&gt;</code>. The part to
the left of the &#64; sign is usually unique, based on the current time and some
random factor. The part on the right is usually a domain name.</p>
<p>Any ID passed to the header's <code class="notranslate">setId()</code> method absolutely MUST conform to
this structure, otherwise you'll get an Exception thrown at you by Swift Mailer
(a <code class="notranslate">Swift_RfcComplianceException</code>). This is to ensure that the generated
email complies with relevant RFC documents and therefore is less likely to be
blocked as spam.</p>
<p>It's easy to add a new ID header to a HeaderSet. You do this by calling the
HeaderSet's <code class="notranslate">addIdHeader()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addIdHeader</span><span class="p">(</span><span class="s1">&#39;Your-Header-Name&#39;</span><span class="p">,</span> <span class="s1">&#39;123456.unqiue@example.org&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>Changing the value of an existing ID header is done by calling its <code class="notranslate">setId()</code>
method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$msgId</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Message-ID&#39;</span><span class="p">);</span>
<span class="nv">$msgId</span><span class="o">-&gt;</span><span class="na">setId</span><span class="p">(</span><span class="nb">time</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> <span class="o">.</span> <span class="nb">uniqid</span><span class="p">(</span><span class="s1">&#39;thing&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;@example.org&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>When output via <code class="notranslate">toString()</code>, an ID header produces something like the
following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$msgId</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Message-ID&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$msgId</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Message-ID: &lt;1234955437.499becad62ec2@example.org&gt;</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="path-headers">
<h3>Path Headers<a class="headerlink" href="#path-headers" title="Permalink to this headline">¶</a></h3>
<p>Path headers are like very-restricted mailbox headers. They contain a single
email address with no associated name. The Return-Path header of a message is a
path header.</p>
<p>You add a new path header to a HeaderSet by calling the HeaderSet's
<code class="notranslate">addPathHeader()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addPathHeader</span><span class="p">(</span><span class="s1">&#39;Your-Header-Name&#39;</span><span class="p">,</span> <span class="s1">&#39;person@example.org&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>Changing the value of an existing path header is done by calling its
<code class="notranslate">setAddress()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$return</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Return-Path&#39;</span><span class="p">);</span>
<span class="nv">$return</span><span class="o">-&gt;</span><span class="na">setAddress</span><span class="p">(</span><span class="s1">&#39;my-address@example.org&#39;</span><span class="p">);</span>
</pre></div>
</div></div>
<p>When output via <code class="notranslate">toString()</code>, a path header produces something like the
following:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$return</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Return-Path&#39;</span><span class="p">);</span>
<span class="nv">$return</span><span class="o">-&gt;</span><span class="na">setAddress</span><span class="p">(</span><span class="s1">&#39;person@example.org&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$return</span><span class="o">-&gt;</span><span class="na">toString</span><span class="p">();</span>

<span class="cm">/*</span>

<span class="cm">Return-Path: &lt;person@example.org&gt;</span>

<span class="cm">*/</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="header-operations">
<h2>Header Operations<a class="headerlink" href="#header-operations" title="Permalink to this headline">¶</a></h2>
<p>Working with the headers in a message involves knowing how to use the methods
on the HeaderSet and on the individual Headers within the HeaderSet.</p>
<div class="section" id="adding-new-headers">
<h3>Adding new Headers<a class="headerlink" href="#adding-new-headers" title="Permalink to this headline">¶</a></h3>
<p>New headers can be added to the HeaderSet by using one of the provided
<code class="notranslate">add..Header()</code> methods.</p>
<p>The added header will appear in the message when it is sent:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Adding a custom header to a message</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swift_Message</span><span class="p">();</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">addTextHeader</span><span class="p">(</span><span class="s1">&#39;X-Mine&#39;</span><span class="p">,</span> <span class="s1">&#39;something here&#39;</span><span class="p">);</span>

<span class="c1">// Adding a custom header to an attachment</span>
<span class="nv">$attachment</span> <span class="o">=</span> <span class="nx">Swift_Attachment</span><span class="o">::</span><span class="na">fromPath</span><span class="p">(</span><span class="s1">&#39;/path/to/doc.pdf&#39;</span><span class="p">);</span>
<span class="nv">$attachment</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addDateHeader</span><span class="p">(</span><span class="s1">&#39;X-Created-Time&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">());</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="retrieving-headers">
<h3>Retrieving Headers<a class="headerlink" href="#retrieving-headers" title="Permalink to this headline">¶</a></h3>
<p>Headers are retrieved through the HeaderSet's <code class="notranslate">get()</code> and <code class="notranslate">getAll()</code>
methods:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>

<span class="c1">// Get the To: header</span>
<span class="nv">$toHeader</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>

<span class="c1">// Get all headers named &quot;X-Foo&quot;</span>
<span class="nv">$fooHeaders</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">getAll</span><span class="p">(</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">);</span>

<span class="c1">// Get the second header named &quot;X-Foo&quot;</span>
<span class="nv">$foo</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// Get all headers that are present</span>
<span class="nv">$all</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">getAll</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
<p>When using <code class="notranslate">get()</code> a single header is returned that matches the name (case
insensitive) that is passed to it. When using <code class="notranslate">getAll()</code> with a header name,
an array of headers with that name are returned. Calling <code class="notranslate">getAll()</code> with no
arguments returns an array of all headers present in the entity.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">It's valid for some headers to appear more than once in a message (e.g.
the Received header). For this reason <code class="notranslate">getAll()</code> exists to fetch all
headers with a specified name. In addition, <code class="notranslate">get()</code> accepts an optional
numerical index, starting from zero to specify which header you want more
specifically.</p>
</div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">If you want to modify the contents of the header and you don't know for
sure what type of header it is then you may need to check the type by
calling its <code class="notranslate">getFieldType()</code> method.</p>
</div></div>
</div>
<div class="section" id="check-if-a-header-exists">
<h3>Check if a Header Exists<a class="headerlink" href="#check-if-a-header-exists" title="Permalink to this headline">¶</a></h3>
<p>You can check if a named header is present in a HeaderSet by calling its
<code class="notranslate">has()</code> method:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>

<span class="c1">// Check if the To: header exists</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">&#39;To: exists&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Check if an X-Foo header exists twice (i.e. check for the 2nd one)</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">&#39;Second X-Foo header exists&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>If the header exists, <code class="notranslate">true</code> will be returned or <code class="notranslate">false</code> if not.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">It's valid for some headers to appear more than once in a message (e.g.
the Received header). For this reason <code class="notranslate">has()</code> accepts an optional
numerical index, starting from zero to specify which header you want to
check more specifically.</p>
</div></div>
</div>
<div class="section" id="removing-headers">
<h3>Removing Headers<a class="headerlink" href="#removing-headers" title="Permalink to this headline">¶</a></h3>
<p>Removing a Header from the HeaderSet is done by calling the HeaderSet's
<code class="notranslate">remove()</code> or <code class="notranslate">removeAll()</code> methods:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>

<span class="c1">// Remove the Subject: header</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">remove</span><span class="p">(</span><span class="s1">&#39;Subject&#39;</span><span class="p">);</span>

<span class="c1">// Remove all X-Foo headers</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">removeAll</span><span class="p">(</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">);</span>

<span class="c1">// Remove only the second X-Foo header</span>
<span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">remove</span><span class="p">(</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>When calling <code class="notranslate">remove()</code> a single header will be removed. When calling
<code class="notranslate">removeAll()</code> all headers with the given name will be removed. If no headers
exist with the given name, no errors will occur.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">It's valid for some headers to appear more than once in a message (e.g.
the Received header). For this reason <code class="notranslate">remove()</code> accepts an optional
numerical index, starting from zero to specify which header you want to
check more specifically. For the same reason, <code class="notranslate">removeAll()</code> exists to
remove all headers that have the given name.</p>
</div></div>
</div>
<div class="section" id="modifying-a-header-s-content">
<h3>Modifying a Header's Content<a class="headerlink" href="#modifying-a-header-s-content" title="Permalink to this headline">¶</a></h3>
<p>To change a Header's content you should know what type of header it is and then
call it's appropriate setter method. All headers also have a
<code class="notranslate">setFieldBodyModel()</code> method that accepts a mixed parameter and delegates to
the correct setter:</p>
<p>The header will be updated inside the HeaderSet and the changes will be seen
when the message is sent:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">();</span>

<span class="c1">// Change the Subject: header</span>
<span class="nv">$subj</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Subject&#39;</span><span class="p">);</span>
<span class="nv">$subj</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="s1">&#39;new subject here&#39;</span><span class="p">);</span>

<span class="c1">// Change the To: header</span>
<span class="nv">$to</span> <span class="o">=</span> <span class="nv">$headers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;To&#39;</span><span class="p">);</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setNameAddresses</span><span class="p">([</span>
  <span class="s1">&#39;person@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Person&#39;</span><span class="p">,</span>
  <span class="s1">&#39;thing@example.org&#39;</span>
<span class="p">]);</span>

<span class="c1">// Using the setFieldBodyModel() just delegates to the correct method</span>
<span class="c1">// So here to calls setNameAddresses()</span>
<span class="nv">$to</span><span class="o">-&gt;</span><span class="na">setFieldBodyModel</span><span class="p">([</span>
  <span class="s1">&#39;person@example.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Person&#39;</span><span class="p">,</span>
  <span class="s1">&#39;thing@example.org&#39;</span>
<span class="p">]);</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
</div>

    </div>

            <div class="navigation">
                            <a accesskey="P" title="Creating Messages" href="messages.html">
                    &laquo;&nbsp;Creating Messages
                </a>
                        <span class="separator">|</span>                            <a accesskey="N" title="Sending Messages" href="sending.html">
                    Sending Messages&nbsp;&raquo;
                </a>
                    </div>
                      </div>
              </div>
          </div>

          <div id="sidepanel">
                  <div id="topicmap" class="supplementary secondary">
        <div class="clearfix">
            <p>&laquo;&nbsp;<a href="/swiftmailer-docs-ru/docs/index.html">Table of Contents</a></p>

            <div class="offline-docs">

                You can download the documentation for offline reading:

                <ul>
                    <li><a id="book-pdf" href="../pdf/Swiftmailer.pdf"><img src="../images/pdficon.png" alt="PDF" /></a></li>
                    <li><a id="book-epub" href="../epub/Swiftmailer.epub"><img src="../images/epubicon.png" alt="EPUB" /></a></li>
                </ul>

            </div>

                            <div id="doc-toc" class="infobar-box">
                    <h3>Chapter Table of Contents</h3>
                    <ul>
<li><a class="reference internal" href="#">Message Headers</a><ul>
<li><a class="reference internal" href="#header-basics">Header Basics</a></li>
<li><a class="reference internal" href="#header-types">Header Types</a><ul>
<li><a class="reference internal" href="#text-headers">Text Headers</a></li>
<li><a class="reference internal" href="#parameterized-headers">Parameterized Headers</a></li>
<li><a class="reference internal" href="#date-headers">Date Headers</a></li>
<li><a class="reference internal" href="#mailbox-e-mail-address-headers">Mailbox (e-mail address) Headers</a></li>
<li><a class="reference internal" href="#id-headers">ID Headers</a></li>
<li><a class="reference internal" href="#path-headers">Path Headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#header-operations">Header Operations</a><ul>
<li><a class="reference internal" href="#adding-new-headers">Adding new Headers</a></li>
<li><a class="reference internal" href="#retrieving-headers">Retrieving Headers</a></li>
<li><a class="reference internal" href="#check-if-a-header-exists">Check if a Header Exists</a></li>
<li><a class="reference internal" href="#removing-headers">Removing Headers</a></li>
<li><a class="reference internal" href="#modifying-a-header-s-content">Modifying a Header's Content</a></li>
</ul>
</li>
</ul>
</li>
</ul>


                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="introduction.html">Introduction</a></li>
                        <li><a href="messages.html">Creating Messages</a></li>
                        <li><a href="headers.html">Message Headers</a></li>
                        <li><a href="sending.html">Sending messages</a></li>
                        <li><a href="plugins.html">Plugins</a></li>
                        <li><a href="japanese.html">Japanese</a></li>
                    </ul>
                </div>
            
            <div class="infobar-box">
                <h3>Questions &amp; Feedback</h3>
                <div class="feedback">
                    <p>
                      <strong>Found a typo or an error?</strong><br />
                      Open a <a href="https://github.com/swiftmailer/swiftmailer/issues">ticket</a>.
                    </p>
                    <p>
                      <strong>Need support or have a technical question?</strong><br />
                      Ask support on <a href="https://stackoverflow.com/">Stack Overflow</a>.
                     </p>
                </div>

                <h3>License</h3>
                <div id="license">
                    <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" src="https://symfony.com/images/license.png" /></a>
                    Swiftmailer <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/MovingImage" rel="dc:type">documentation</span> is licensed under a
                    Creative Commons Attribution-Share Alike 3.0
                    Unported <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/">License</a>.
                </div>
            </div>
        </div>
    </div>
          </div>

        <div id="footer">
          <div id="footercontent">
            
            <div id="about">
            </div>
        
        <div id="support">
          
          <dl class="getstarted">
            <dt>Get Started</dt>
            <dd>
              <ul>
                <li><a href="/swiftmailer-docs-ru/download.html">Download</a></li>
                <!--<li>Tutorials</li>-->
                <li><a href="/swiftmailer-docs-ru/docs/introduction.html">User Guide &amp; Book</a></li>
              </ul>
            </dd>
          </dl>

          <dl class="related">
            <dt>Get Help</dt>
            <dd>
              <ul>
                <li><a href="/swiftmailer-docs-ru/docs/introduction.html">Documentation</a></li>
                <li><a href="/swiftmailer-docs-ru/bugs.html">Report a Bug</a></li>
                <li><a href="https://groups.google.com/group/swiftmailer">Google Group</a></li>
              </ul>
            </dd>
          </dl>

            </div>
            
          </div>
        </div>
        
      </div>
      
    </div>
    </div>
  </body>
</html>
